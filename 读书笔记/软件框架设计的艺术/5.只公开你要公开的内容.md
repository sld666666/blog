#只公开你要公开的内容

我们所设计的API都会被可能误用。几乎所有的API设计者都会有这样的共识：一个人API设计的时间越长，他设计的API公开的内容会越少。


设计API的几种方法：
## 1. 方法优于字段
这个不用说了。 geter setter。 这样做会有很多改变的余地。 如计算、转换、校验、覆盖

## 2. 工厂方法优于构造函数

工厂方法会带来很大的灵活性，三个好处：

1. 返回不一定是声明的类型可以是子类
2. 构造的对象可以被缓存
3. 同步的控制。 可以都构造对象前后的代码进行控制。

## 3. 让所有的内容都不可改变

通常情况下， 在设计一个类的时候，如果不考虑让拥有子类，那就不应该让这个类被继承。 用final 来修饰。 还有些其他方案来： 不公开构造函数转而提供工厂方法。把大部分方法变为final或者private

## 4. 避免滥用setter方法

一个宝贵的教训： 如无必要，绝对不要再正式的API中声明setter方法。
## 5. 尽可能通过友元的方式来公开功能

在java中，所谓的友元就是用默认的package方式访问，即允许同一个包内的代码进行访问。

有个实际的例子

## 6. 赋予对象创建者更多的权利

## 7.  避免暴露深层次继承

避免深层次的继承，定义程序的接口，并让用户来实现这些接口。 如果一个类继承了某个类或者接口，那么就可以作为响应的类或接口被使用。

如在swing中， frame间接继承了compoment，这样就表示所有使用compoment的地方，都可以使用frame. 实际上frame继承 compoment是为了复用compoment的代码。这是一种典型的面向对象的复用的误用。 所以如果发现继承提醒超过2层，一定要想清楚“我是在设计API还是在复用代码”，如果是后者，则做好子类化准备。
