# Micrroservices

## 1. 什么是微服务
几个关键字：

- small 
- autonomous
- combination

## small： 焦点在一件事情上，而且做的足够好
（Gather together those things that change for the
same reason, and separate those things that change for different reasons）

“how small is small”： 代码行数？ “small enough and no smaller”。 通常我们就问一个问题“你认为你的系统还可以不可以在再被分解？”如果说是那就认为还不够small。

当然一个建议的原则是如果一个系统不能被一个小团队彻底掌握，那么分解他。

## Autonomous
原子性、独立部署。 所有的服务之间通过网络访问。

所有的服务能独立部署，而且不能相互影响。所以我们必须非常清楚我们的服务什么是公开的，什么事不能公开的。

最核心的一条准则是： 通过修改服务本身就能改变和部署一个服务，而不依赖于其他任何事情。

这就非常依赖模型和API的设计了。

## 微服务优点

1. 让不同的服务选择不同的技术
2. 弹性： 一个微服务发生故障，不会引起整个系统的不可用。
3. 易于部署
4. 使组织架构更灵活。 对比于一个大团队来维护大量的代码。 用很多分散的小团队来维护很多分散的小量代码更易于组织架构的调整。
5. 可组合型
6. 可替换性

## 面向服务的架构怎么样？
Service-oriented architecture (SOA) 是设计用来进行业务协同工作的。

主要是业务上的划分。 使用我的业务可以不其他好几个业务域使用，其他业务也可以不用知道我内部实现的细节。

很多SOA的架构没有明确说明多大才是大，多小才是小。他缺乏对正式世界的足够抽象使服务能变得不再耦合。

##microservices 和SOA的区别
微服务更认为是SOA更小力度的划分。 淘宝是一个典型的SOA的架构。 所有我们催生了一个很重要的概念“组件”，在微服务的架构中， 这些组件都可以认为是要给服务。

## 其他相似技术

## 动态链接库
1. 要同一种语言或者运行在同一个平台
2. 部署麻烦
## 组件化
OSGI

## 没有银子弹
面向微服务价格的核心还是抽象+分解。 

千万要记住，任何一种技术都有其面向的领域。 如果系统不够复杂，使用微服务就值得商榷。

微服务的优点和缺点（或者说挑战）一样明显。

优点

	1. 开发简单
	2. 技术栈灵活
	3. 服务独立无依赖
	4. 独立按需扩展
	5. 可用性高

缺点（挑战）

	1. 多服务运维难度
	2. 系统部署依赖
	3. 服务间通信成本
	4. 数据一致性
	5. 系统集成测试
	6. 重复工作
	7. 性能监控

没有最好的，只有最合适自己的。
![](http://img3.tbcdn.cn/L1/461/1/0ab73766d0b12ca16aa249ae4a61053b34f51548.png)


![](http://img2.tbcdn.cn/L1/461/1/2ada4ac057eaf561f8862572bf6327845c482ca7.png)