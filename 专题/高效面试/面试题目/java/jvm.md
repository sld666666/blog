# jvm
## 内存模型
java内存模型有几个区域组成：
- 程序计数器： 线程独立，垃圾回收
- 堆：线程共享
- 虚拟机栈：线程相关
- native栈：
- 方法区： 类，常量，静态变量，线程共享。永久代

## 代
- 新生代 ：内存new出来的对象
- 年老代：多次GC以后还存在
- 永久代：

在新生代包含（Eden 和 survivor,其中有两个），。
- 对象优先在新生代中创建
- 新生代GC以后，会把对象复制到Survvor中
- 如果一个对象多次回收不掉或者特别大的对象，进入年老代

垃圾回收算法：
- 新生代的回收： 复制算法(内存防伪大小相同的两块，使用其中一块，当这一块内存用完了以后，将活的对象复制到另一块，清除第一块所有内存)。  Minor GC。 从Eden复制到survivor
- 年老代回收：
  - 标志-清除算法： 标志出要回收的对象，统一回收。 效率低，内存碎片
  - 标志-整理算法： 标志出要回收的对象，让活的对象往前移动，覆盖要清理的区域

Minor GC ： 无法为一个新的对象分配空间时会触发 Minor GC
fgc: 清理：年老代+年轻代
major gc: 清理年老代
ygc： eden分配满时候触发，比较频繁

## jvm参数
- Xms ： 初始堆大小
- Xmx: 最大堆
- xmn: 年轻代
- -XX:MaxPermSize： 永久代最大值
年老代 = 最大堆 - 年轻代-永久代
